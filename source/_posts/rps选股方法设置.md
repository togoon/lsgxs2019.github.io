---
title: rps选股方法设置
date: 2021-08-13 10:42:28
tags: stock
categories: stock
cover: /2021/08/13/rps选股方法设置/主升浪之大洋电机.png
---

#### rps选股思路

>  对指定板块的股票，使用EXTRS技术指标，利用扩展数据的不同时间周期进行涨幅计算排序，以这些涨幅排序数据为基础输出为rps曲线，或者进行条件选股，找出强势的个股或者板块。
>
>  rps的全称：Relative Price Strength Rating

```
- 板块
  - 上市一年以上
  - 基金持股百分之三或者北向资金3000万
  - 板块指数
- 技术指标
  - EXTRS 用来计算指定时间周期的涨幅
- 扩展数据
  - 120
  - 250
  - 50
- rps曲线
  - 个股的rps曲线
  - 板块指数的rps曲线
- 使用rps扩展数据计算结果进行条件选股
- 第二阶段
  - 在合适的买点买入并持有第二阶段的主升浪
```

<!--more-->

#### rps在个股方面的应用

* **筛选出上市一年以上股票**。在A股市场，新股一盘都是一字涨停板往上跳，没有实际的统计意义。可以通过一个条件公式来过滤出上市一年以上的股票。

  * 新建【上市一年以上】板块。选择并打开通达信的【工具/自定义板块设置】菜单项，点击【新建板块】，输入[上市一年以上]确定即可。
  * 新建过滤上市一年以上股票的公式。选择并打开通达信的【功能/公式系统/公式管理器】菜单项，或者使用Control+F直接打开公式管理器。选择条件选股公式—其他类型，点击新建。公式内容如下：
   ```tiddlywiki
    BARSCOUNT(C)>N; N为参数，一般设为250
  
   ```
  * 选股到上市一年以上板块
    打开通达信的【功能/选股器/条件选股】，或者使用Control+T打开条件选股，条件选股公式的下拉菜单中，选中：上市一年以上，选股范围为：沪深A股，然后点：加入条件。
  
  ```html
   这个“上市一年以上“板块中的股票，需要手动更新，建议一个月更新一次即可
  ```
  
* **新建一个计算股票涨跌幅的技术指标**

  * 打开通达信[功能/公式系统/公式管理器]，或则使用Control+F直接打开公式管理，技术指标公式—其他类型，点击新建按钮，建立一个小公式，命名为EXTRS。公式内容如下：

    ```
    EXTRS:(C-REF(C,N))/REF(C,N);
    N缺省值为250
    ```
    
    其实这个涨跌幅的数据是rps的基础数据，所有的计算都是依据这个涨跌幅进行的。比如后面的各个时间周期的rps数值扩展和个股的rps数值。
  
* **建立扩展数据，对股票涨跌幅进行排序**

  打开通达信软件的【功能/公式系统/扩展数据管理器】，或者直接输入【.902】打开扩展数据管理器。具体操作方法如下：

  ```html
   - 选中第1条扩展数据
     - 点击上图中的修改，在扩展数据属性里首先设置数据1如下：
     - 技术指标公式选择新建的“EXTRS”指标
     - 计算参数为120（对应半年期的RPS）
     - 计算时段为本地所有数据
     - 计算品种为“自定义板块”下面的“上市一年以上”这个板块
     - 勾选“精确复权”及“生成横向排名数据”
     - 排名方法为“0-1000归一化顺序”
   - 选中第2条扩展数据
     - 点击上图中的修改，在扩展数据属性里首先设置数据1如下：
     - 技术指标公式选择新建的“EXTRS”指标
     - 计算参数为250（对应一年期的RPS）
     - 计算时段为本地所有数据
     - 计算品种为“自定义板块”下面的“上市一年以上”这个板块
     - 勾选“精确复权”及“生成横向排名数据”
     - 排名方法为“0-1000归一化顺序”
   - 可以再分别设置50、10、20、60周期的扩展数据，操作方法同上，只是时间周期不同。
  
  ```

  

* **建立rps幅图显示曲线**

  * 新建一个股价相对强度RPS技术指标。通达信软件，Control+F，技术指标公式—其他类型—新建。价相对强度RPS, 出两条彩线的代码如下：

    ```html
    X:=EXTDATA_USER(1,0);{120天的}
    RPS120:X/10,LINETHICK2,COLORGREEN;
    IF(RPS120>=M,RPS120,DRAWNULL),LINETHICK2,COLORRED;
    ;
    Y:=EXTDATA_USER(2,0);{250天的}
    RPS250:Y/10,LINETHICK2,COLORWHITE;
    IF(RPS250>=M,RPS250,DRAWNULL),LINETHICK2,COLORRED;
    ```

    M是参数，可以根据自己的偏好设为85-90，我个人偏好90。意思就是RPS大于90时，显示为红线。

* **下载财务数据**

  * 记得每天收盘后下载完整的财务数据

* **使用rps值进行条件选股**

  * 选出rps值大于90以上的股票


####   rps在板块方面的应用

* 新建一个【板块指数rps】的自定义板块，并导入各类板块指数。
  * 选择通达信界面最下面的[板块指数]标签，在窗口界面中弹出鼠标右键，选择[批量/是]，选择【全选中】、【加入到板块】按钮，在打开的对话框中选择新建的板块指数rps目录即可把这些板块指数加入到新建的自定义【板块指数rps】中。

* **新建一个技术指标的公式。（如果前期已经设置好了个股的RPS曲线，此步骤可以不用做了！）**

建立一个小公式，命名为“EXTRS”，用来计算股票涨跌幅

```html
EXTRS:(C-REF(C,N))/REF(C,N);

N缺省值为250

```

* 建立扩展数据

通达信软件输入：.902，进入扩展数据管理器。 选中第6条扩展数据，如下图：

![img](/images/扩展数据.png)

鼠标左键点击“数据6”，然后点击“修改”。如下图：

技术指标公式选择新建的“EXTRS”指标

计算参数为10（对应10日的RPS）

计算时段为本地所有数据

计算品种为“自定义板块”下面的**“板块指数RPS”**这个板块

勾选“精确复权”及“生成横向排名数据”

排名方法为“0-1000归一化顺序”

最后点击确定。

---

再重复上述步骤， 在扩展数据属性里首先设置数据7，计算参数为20（对应20日的RPS）。

最后点击确定

---

再重复上述步骤， 在扩展数据属性里首先设置数据8，计算参数为60（对应60日的RPS）。

最后点击确定。

* 再新建一个技术指标公式：RPS板块。RPS板块曲线，出3条彩线的代码如下：

```html

U1:=EXTDATA_USER(6,0);{10天的}

RPS10:U1/10,LINETHICK2,COLORLICYAN;

IF(RPS10>=M,RPS10,DRAWNULL),LINETHICK2,COLORRED;



W1:=EXTDATA_USER(7,0);{20天的}

RPS20:W1/10,LINETHICK2,COLORBROWN;

IF(RPS20>=M,RPS20,DRAWNULL),LINETHICK2,COLORRED;



X1:=EXTDATA_USER(8,0);{60天的}

RPS60:X1/10,LINETHICK2,COLORYELLOW;

IF(RPS60>=M,RPS60,DRAWNULL),LINETHICK2,COLORRED;


M是参数，可以根据自己的偏好设为85-90，我个人偏好90。意思就是RPS大于90时，显示为红线。
```

* **第五步，确保下载完整的历史数据**

**切记1：下载完整的历史数据！这个只需要操作一次。**

通达信软件的菜单—系统—盘后数据下载：请自行修改下载的开始时间:

![img](/images/历史数据下载.png)

**切记2：需要每天存盘下载日线数据，并全部刷新扩展数据。这个操作每天收盘后，都需要进行一次，才能显示最新的RPS曲线**

![img](/images/刷新扩展数据.png)

最后在板块指数的K线界面输入：RPS板块。就出现三条RPS曲线了

