---
title: UEFIandGPT电脑主机安装windows10
date: 2021-08-20 08:42:31
tags: 系统维护
categories: 系统维护
cover: /2021/08/20/UEFIandGPT电脑主机安装windows10/win壁纸_莲花.jpg
---

#### UEFI +GPT电脑主机安装Windows10

> 好久没有安装windows系统了，有点生疏。一台UEFI启动的机器，使用ventory多合一的winpe启动后，在winpe下格式化分区，使用dism++恢复自己封装的win10系统(wim格式的镜像)，重启后不能进入win10。后来使用别的方法恢复镜像，同样不能正常启动windows10系统。

后来仔细想了一下，会不是是硬盘的分区表格式不对。当时没在意原来的硬盘分区情况。第二天又上门去安装系统，特意看了一下硬盘的情况，是一个支持NVME协议的SSD硬盘，另外一个应该是sata协议的机械硬盘。在更改UEFI启动顺序，记得有个windows boot manager intel ssd 选项，这个就是那个固态硬盘。豁然开朗，问题就在这个上。

> 对于这种配置的双硬盘系统，一般把操作系统安装在这SSD固态硬盘上，可以提高系统的运行速度，机械硬盘可以用保存用户数据。

<!--more-->

重新安装的方法如下：

* 在UEFI启动参数表里更改启动顺序。设置U盘为第一驱动顺序

* 使用U盘的winpe启动，在winpe下使用分区工具把单独的那个固态硬盘重新分区，记得使用gpt格式的，不能使用mbr格式，否则系统安装上，UEFI也无法识别硬盘。分区时，如果不太熟悉，可以直接使用快速分区，建立一个分区即可，另外记得把esp分区勾选中。

* 直接使用ventory的多合一winpe，可以直接显示安装版的windows10镜像，选择即可进入常规的windows安装界面，剩下的就很简单了。完成安装后重启系统，第一有点慢，一直在转圈圈，耐心等，正常就是如此。给别人装机就有点忐忑^_^。所以我轻易不给别人装机，谁叫他是自己的亲戚呢。一点点的问题，最后都是你装的问题，哈哈，这是人性，扯远了。正在疑惑时，熟悉的windows10界面终于出现了，我就说，没有我搞不定问题，其实，这个也可以收获满满的成就感，给自己鼓励一下。

* 最后记得把UEFI里的启动设备顺序还原为SSD第一顺序启动。

* 最后总结要点如下：

  ```
  1. 在UEFI界面里设置启动顺序为自带winpe的U盘
  2. 在windows管理工具下查看硬盘的情况（如果已经不能登陆windows系统，就在winpe的分区工具里可以看到几个硬盘）：是一块普通的硬盘，还是带有固态硬盘的双硬盘配置。如果有固态硬盘，就可以把操作系统单独安装在这个固态硬盘上。
  3. UEFI系统就一定要使用GPT的硬盘分区；如果是传统那个的bios，那就可以使用MBR硬盘分区。直接在这固态硬盘上新建分区，另外一个硬盘的数据不会丢失。保险起见，也可以先用一个大容量的移动硬盘把用户的数据复制出来，这样你可以很踏实。
  4. 如果没有靠谱的winpe分区工具，就只能在进入原版window界面后按下快捷键，进入cmd界面，使用命令行来完成分区，这个有点小门槛，不过熟悉了不过如此，实在记不住，就把它保存在你的笔记里，在需要的时候可以查询。
  ```


* **扩展知识：清除驱动器并将其转换为 GPT的两种方法**（**数据很宝贵，操作需谨慎。如果搞不懂，就不要使用下面的方法，否则数据会没有的**）

  详细可参照微软公司官方文档
  
  * **使用 Windows 安装程序擦除和转换驱动器**
  关闭电脑，然后放入 Windows 安装 DVD 或 USB 密钥。
  在 UEFI 模式下将电脑启动到 DVD 或 USB 密钥。 有关详细信息，请参阅 启动到 UEFI 模式或传统 BIOS 模式。
  选择安装类型时，请选择“自定义” 。
  在“你想将 Windows 安装在哪里？”屏幕上，选择驱动器上的每个分区，并选择“删除” 。 驱动器将显示单个未分配空间区域。
  选择未分配的空间，然后单击“下一步” 。 Windows 检测到电脑已启动到 UEFI 模式，并使用 GPT 驱动器格式重格式化驱动器，然后开始安装。
  
  * **手动擦除驱动器并将其转换为 GPT**：
    关闭电脑，然后放入 Windows 安装 DVD 或 USB 密钥。
    在UEFI 模式下将电脑启动到 DVD 或 USB 密钥。 有关详细信息，请参阅 启动到UEFI模式或传统 BIOS 模式。
    在 Windows 安装程序中，按“Shift+F10”打开命令提示符窗口 。
    打开 diskpart 工具：
    ```
    diskpart
    ```
  
    ```
    list disk
    ```
  
    ```
     select disk <disk number>
     clean
     convert gpt
     exit
    ```
    关闭命令提示符窗口。
    继续 Windows 安装程序安装。
    选择安装类型时，请选择“自定义” 。 驱动器将显示为单个未分配空间区域。
    选择未分配的空间，然后单击“下一步” 。 Windows 开始安装。

